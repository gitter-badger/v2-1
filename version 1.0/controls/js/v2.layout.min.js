/*!
 * JavaScript v2 v1.0.1
 * https://github.com/v2kit/v2
 *
 * @author hyly
 * @date 2018-08-01
 * @descript a valuable technology object.
 */
(function(n,t){function f(){return{ctor:function(){this.stack=!0;this.element=document.body;this.context=document},init:function(){this.base.init();this.$=n(this.element)},render:function(){this.base.render();this.addClass("lyt")},header:function(){var n=this.data||{},r;n.logo=n.logo||"成都优易票信息管理系统";i.test(n.logo)&&(n.logo='<img src="'+n.logo+'" alt=""/>');n.userAvatar=n.userAvatar||n.userName&&n.userName[0]||"测";i.test(n.userAvatar)&&(n.userAvatar='<img src="'+n.userAvatar+'" alt=""/>');r=['<div class="lyt-header">','\t<div class="lyt-brand">','\t\t<button type="button" id="lyt-navbar-toggle" class="lyt-navbar-toggle">','\t\t\t<span class="icon-bar"><\/span>','\t\t\t<span class="icon-bar"><\/span>','\t\t\t<span class="icon-bar"><\/span>',"\t\t<\/button>","\t\t{logo}","\t<\/div>",'\t<ul class="lyt-collapse">',"\t\t<li>",'\t\t<button class="btn btn-primary">','\t\t\t<i class="glyphicons glyphicons-bell"><\/i>','\t\t\t&ensp;{return msgTitle || "消息管理"^}','\t\t\t<span class="badge">{return msgCount >>> 0^}<\/span>',"\t\t<\/button>","\t\t<\/li>",'\t\t<li class="lyt-keyboard">{for(var item in [keyboard]) "<a href="{item.href}" title="{item.title}">{item.text}<\/a>"^}<\/li>','\t\t<li class="lyt-search">','\t\t\t<div class="input-group">','\t\t\t\t<div class="input-group-btn">','\t\t\t\t\t<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',"\t\t\t\t\t\t<span>全部<\/span>",'\t\t\t\t\t\t<i class="caret"><\/i>',"\t\t\t\t\t<\/button>",'\t\t\t\t\t<ul class="dropdown-menu">','                       {for(var item<i> in [navbar]) "<li data-eq="{i}"><a href="#">{item.text}<\/a><\/li>"^}','\t\t\t\t\t\t<li role="separator" class="divider"><\/li>','\t\t\t\t\t\t<li class="active"><a href="#">全部<\/a><\/li>',"\t\t\t\t\t<\/ul>","\t\t\t\t<\/div><!-- /btn-group -->",'\t\t\t\t<input type="text" class="form-control" aria-label="...">','               <div class="lyt-search-layer hidden"><\/div>','\t\t\t\t<span class="input-group-btn">','\t\t\t\t\t<button class="btn btn-default" type="button">','\t\t\t\t\t\t<i class="glyphicons glyphicons-search"><\/i>',"\t\t\t\t\t<\/button>","\t\t\t\t<\/span>","\t\t\t<\/div>","\t\t<\/li > ",'\t\t<li class="lyt-user">','\t\t\t<a href="#">','\t\t\t\t<div class="lyt-user-avatar">{userAvatar}<\/div>',"\t\t\t<\/a>",'\t\t\t<div class="lyt-user-main">','\t\t\t\t<div class="lyt-user-info">','\t\t\t\t\t<div class="lyt-user-avatar">{userAvatar}<\/div>','\t\t\t\t\t<p class="text-center">{return userMail || userName || "AI"^}<\/p>',"\t\t\t\t<\/div>",'\t\t\t\t<ul class="lyt-user-menu">',"\t\t\t\t\t<li>",'\t\t\t\t\t\t<a href="#">','\t\t\t\t\t\t\t<i class="glyphicons glyphicons-address-book"><\/i>',"\t\t\t\t\t\t\t<span>基本资料<\/span>","\t\t\t\t\t\t<\/a>","\t\t\t\t\t<\/li>","\t\t\t\t\t<li>",'\t\t\t\t\t\t<a href="#">','\t\t\t\t\t\t\t<i class="glyphicons glyphicons-book-open"><\/i>',"\t\t\t\t\t\t\t<span>详细资料<\/span>","\t\t\t\t\t\t<\/a>","\t\t\t\t\t<\/li>","\t\t\t\t\t<li>",'\t\t\t\t\t\t<a href="#/views/changePwd">','\t\t\t\t\t\t\t<i class="glyphicons glyphicons-shield"><\/i>',"\t\t\t\t\t\t\t<span>安全中心<\/span>","\t\t\t\t\t\t<\/a>","\t\t\t\t\t<\/li>","\t\t\t\t<\/ul>",'\t\t\t\t<a href="#" class="lyt-user-logout text-center">','\t\t\t\t\t<i class="glyphicons glyphicons-power"><\/i>',"\t\t\t\t<\/a>","\t\t\t<\/div>","\t\t<\/li>","\t<\/ul>","<\/div>"];this.$.append(t.expression(r.join(""),n))},navbar:function(){var i=this.data||{},n=t.map(i.navbar,function(n){if(n.menu){var i=[t.replace('<li><p><i class="{flag}"><\/i><span>{text}<\/span><em class="halflings"><\/em><\/p>',n)];i.push('<div class="lyt-navbar-thumbnail"><ul>');t.each(n.menu,function(n){i.push(t.replace('<li><a href="{href}">{text}<\/a><\/li>',n))});i.push("<\/ul><\/div>");i.push("<\/li>")}return i.join("")});n=['<div class="lyt-navbar">','\t<div class="lyt-navbar-header text-center">','\t\t<i class="glyphicons glyphicons-calendar"><\/i><span class="lyt-navbar-calendar">',t.date.format(new Date,"yyyy年MM月dd日"),"<\/span>","\t<\/div>",'\t<ul class="lyt-navbar-menu">',n.join(""),"<\/ul>","<\/div>"];this.$.append(n.join(""))},container:function(){this.tabbar=[{text:"首页",value:"#/views/index"}];this.$.append('<div class="lyt-container">   <div class="lyt-tabbar">\t\t<div class="lyt-tabbar-region">\t\t\t<div class="lyt-tabbar-region-scroll">\t\t\t\t<ul><li><a href="#/views/index" class="active">首页<\/a><\/li><\/ul>\t\t\t<\/div>\t\t<\/div>\t\t<div class="lyt-tabbar-roll">\t\t\t<button type="button">\t\t\t\t<i class="glyphicons glyphicons-chevron-left"><\/i>\t\t\t<\/button>\t\t\t<button type="button">\t\t\t\t<i class="glyphicons glyphicons-chevron-right"><\/i>\t\t\t<\/button>\t\t<\/div>\t<\/div>   <div class="container">       <ul>           <li data-domain="#/views/index"><iframe class="ifr" src="views/index.html" height="100%" frameborder="0"><\/iframe><\/li>       <\/ul>   <\/div><\/div>');this.$region=this.$.find(".lyt-tabbar-region");this.$regionContent=this.$region.find("ul");this.$containerContent=this.$.find(".container").children()},ajax:function(){this.data={keyboard:[{text:"系统设置",href:"#/views/setting",title:"系统设置"}],navbar:[{text:"商品管理",flag:"halflings halflings-flag",menu:[{text:"商品列表",href:"#/views/goods/index"},{text:"商品分类",href:"#/views/goods/categorize"}]},{text:"税盘管理",flag:"halflings halflings-hdd",menu:[{text:"税盘信息",href:"#/views/board/index"},{text:"税盘设置",href:"#/views/board/setting"}]}]}},remove:function(n){n&&(n=n.value||n,t.each(this.tabbar,function(i,r){if(i.value==n)return t.removeAt(this.tabbar,r),location.href=this.$regionContent.children().eq(r).remove().prevObject.eq(r-1).children().attr("href"),this.stack&&this.$containerContent.find('[data-domain="'+n+'"]').remove(),!1},this))},format:function(n){return t.expression('<a href="{value}" class="{if(active) "active" ^}">{text}{if(showRemove) "<i class="halflings halflings-remove"><\/i>" ^}<\/a>',n)},push:function(n){if(!n)return!1;t.has(this.tabbar,function(t){return t.value==n.value})?this.stack&&this.$containerContent.find('[data-domain="'+n.value+'"]').removeClass("hidden").siblings().addClass("hidden"):(this.tabbar.push(n),this.$regionContent.append(t.format("<li>{0}<\/li>",this.format(n))),this.stack&&(this.$containerContent.children().addClass("hidden"),this.$containerContent.append(t.format('<li data-domain="{0}"><iframe class="ifr" src="{1}.html" height="100%" frameborder="0"><\/iframe><\/li>',n.value,n.value.slice(1)))));this.stack||this.$containerContent.children().children().attr("src",hash.slice(1)+".html")},resolve:function(){this.header();this.navbar();this.container()},commit:function(){var l=this.$.find(".lyt-navbar"),p,i,h,v,c,y,k;this.$.find(".lyt-navbar-toggle").click(function(){l.toggleClass("lyt-navbar-min")});p=l.find(".lyt-navbar-menu > li");p.children("p").click(function(){var t=n(this).parent();t.hasClass("active")?t.removeClass("active"):t.addClass("active").siblings().removeClass("active")});var e=this,s=null,tt=this.data||{},d=tt.navbar||[],a=this.$.find(".lyt-search"),f=a.find(".input-group-btn"),it=f.find("button span"),g=f.find(".dropdown-menu li"),nt=function(){o.empty().append(s?ut.eq(+s).clone(!0):rt.clone(!0))},w=function(){var n=b.val(),i=s?d[s]:d;t.each(i.menu||i,function(i,r){var u=o.children().children(),f,e;if(i.menu){if(i.text.indexOf(n)>-1){u.eq(r).removeClass("hidden");return}f=!1;e=u.eq(r).find("li");t.each(i.menu,function(t,i){t.text.indexOf(n)>-1?(f=!0,e.eq(i).removeClass("hidden")):e.eq(i).addClass("hidden")});u.eq(r).toggleClass("hidden",!f)}else u.eq(r).toggleClass("hidden",i.text.indexOf(n)===-1)})};g.click(function(){f.removeClass("open");g.removeClass("active");s=n(this).addClass("active").attr("data-eq");it.text(n(this).children().text());nt();w()});var b=a.find("input"),o=a.find(".lyt-search-layer"),rt=l.find(".lyt-navbar-menu"),ut=l.find(".lyt-navbar-menu ul");b.on("click",function(){w();o.removeClass("hidden")});b.on("input propertychange",w);a.mouseleave(function(){o.addClass("hidden")});o.on("click","a",function(){o.addClass("hidden")});nt();h=this.$.find(".lyt-keyboard a,.lyt-user-menu a");v=p.find(".lyt-navbar-thumbnail a");h=h.add(v);n(".lyt-tabbar").on("click",".halflings-remove",function(){return e.remove(n(this).parent().attr("href")),!1});c=this.$region.first();this.$region.next().find("button:first-child").click(function(){n(c).animate({scrollLeft:c.scrollLeft-120},120)}).next().click(function(){n(c).animate({scrollLeft:c.scrollLeft+120},120)});n(document).on("click",function(n){n.target&&t.contains(f.get(0),n.target)||f.removeClass("open")});f.on("click",'[data-toggle="dropdown"]',function(){f.toggleClass("open")});y=function(n,t){return n===t||n.slice(-t.lenght)===t};k=function(){var t=location.hash;t==null&&(t=u.exec(location.href))&&(t=t[5]);r.test(t)&&(h.removeClass("active").each(function(n){i=h.eq(n);y(i.attr("href"),t)&&(e.push({text:i.text(),active:!0,showRemove:!0,value:t}),i.addClass("active"))}),v.each(function(n){i=v.eq(n);y(i.attr("href"),t)&&i.parentsUntil("ul.lyt-navbar-menu").eq(-1).addClass("active").siblings().removeClass("active")}),e.$.find(".lyt-tabbar a").removeClass("active").each(function(){i=n(this);y(i.attr("href"),t)&&(i.addClass("active"),e.stack?e.$containerContent.find('[data-domain="'+t+'"]').removeClass("hidden").siblings().addClass("hidden"):e.$containerContent.children().children().attr("src",t.slice(1)+".html"))}))};window.onhashchange=document.body.onhashchange=k()||k}}}var r=/^#(\/\w+)+/,u=/^(https?|ftp):\/\/((\w+\.)*\w+)(\?[^#]*)?(#.*)?/,i=/\.(jpe?g|png|gif|bmp|ico|svg)\b/i;t.register("layout",f)})(jQuery,v2Kit);